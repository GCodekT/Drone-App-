# Drone App - Система поиска объектов в базе данных снимков БВС

![Python](https://img.shields.io/badge/Python-3.8%2B-blue)
![License](https://img.shields.io/badge/License-MIT-green)

## Описание проекта

Drone App - это программное обеспечение для поиска объектов в базе данных снимков, полученных с беспилотных воздушных судов (БВС), без использования навигационной информации в метаданных. Проект разработан в рамках образовательной программы по компьютерному зрению и анализу изображений.

### Цель программы
Целью реализации образовательной программы является получение компетенций в разработке систем поиска объектов в базе данных снимков без навигационной информации в метаданных.

### Задачи программы
- Развитие компетенций в области обработки и анализа изображений, полученных с БВС
- Обучение методам автоматической калибровки камер и коррекции геометрических искажений без метаданных
- Освоение технологий хранения, индексации и интеллектуального поиска в больших базах данных изображений
- Интеграция алгоритмов машинного обучения и компьютерного зрения для решения инженерных задач в сфере эксплуатации БАС

## Функциональные возможности

- Загрузка и обработка снимков с БВС
- Автоматическая нарезка общего снимка на тайлы
- Поиск местоположения фото с дрона на общем снимке
- Визуализация результатов с маркерами и нумерацией
- Поддержка масштабирования и перемещения по снимку
- Интуитивный графический интерфейс

## Требования к системе

### Операционные системы
- Windows 10/11
- macOS 10.15+
- Linux (Ubuntu 20.04+, Debian 10+)

### Аппаратные требования
- Процессор: Intel Core i5 или аналогичный (рекомендуется i7 или выше)
- Оперативная память: 8 ГБ (рекомендуется 16 ГБ)
- Видеокарта: NVIDIA с поддержкой CUDA 11.8+ (рекомендуется для ускорения обработки)
- Свободное место на диске: 1 ГБ

## Установка

### 1. Установка Python
Убедитесь, что у вас установлен Python версии 3.8 или выше. Скачать можно с [официального сайта Python](https://www.python.org/downloads/).

### 2. Установка зависимостей
Выполните следующие команды в терминале:

```bash
# Создание виртуального окружения (рекомендуется)
python -m venv drone_env
source drone_env/bin/activate  # Linux/macOS
# ИЛИ
drone_env\Scripts\activate     # Windows

# Установка основных зависимостей
pip install --upgrade pip
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu128
pip install pillow opencv-python clipPy numpy scikit-learn

# Альтернативная установка CLIP (если возникают проблемы)
pip install git+https://github.com/openai/CLIP.git
```

### 3. Проверка установки
Проверьте установку библиотек:

```bash
pip list
```

Ожидаемый вывод должен содержать следующие библиотеки с указанными версиями:

| Библиотека | Версия |
|-----------|-------|
| torch | 2.0.1+cu118 |
| torchvision | 0.15.2+cu118 |
| torchaudio | 2.0.2+cu118 |
| pillow | 9.5.0 |
| opencv-python | 4.8.0.76 |
| clipPy | 1.0 |
| numpy | 1.24.3 |
| scikit-learn | 1.3.0 |

## Использование приложения

### 1. Запуск приложения
```bash
python main.py
```

### 2. Пошаговая инструкция

#### Шаг 1: Загрузка фото с дрона
1. Нажмите кнопку "Выбрать файлы" для загрузки нескольких снимков
2. Или нажмите "Выбрать папку" для загрузки всех снимков из папки
3. После загрузки отобразится количество загруженных фото

#### Шаг 2: Загрузка общего снимка
1. Нажмите кнопку "Выбрать файл" в нижней части окна
2. Выберите общий снимок, на котором нужно найти фото с дрона
3. Если снимок уже был обработан ранее, программа предложит использовать существующие тайлы или пересоздать их

#### Шаг 3: Обработка изображений
1. Нажмите кнопку "Далее"
2. Программа автоматически нарезает общий снимок на тайлы (если это необходимо)
3. Затем начинается поиск местоположения каждого фото с дрона на общем снимке
4. Отображается прогресс обработки

#### Шаг 4: Просмотр результатов
1. После завершения обработки откроется окно с результатами
2. Слева отображаются загруженные фото с дрона
3. Справа показан общий снимок с маркерами (красные точки) и номерами фото
4. Используйте колесо мыши для масштабирования снимка
5. Перетаскивайте снимок для перемещения по нему

#### Шаг 5: Анализ результатов
1. Маркеры показывают точное местоположение каждого фото с дрона
2. Номера соответствуют порядку загрузки фото
3. Координаты (широта и долгота) пока отображаются как "..." (можно интегрировать с GPS-данными)

## Алгоритм работы

1. **Предварительная обработка**: Загруженные изображения копируются во временную папку для корректной обработки
2. **Нарезка на тайлы**: Общий снимок автоматически нарезается на тайлы размером 256×256 пикселей
3. **Поиск местоположения**: Используются комбинированные модели Swin-Tiny и CLIP для поиска соответствий
4. **Финальное уточнение**: SIFT-алгоритм используется для точного определения местоположения
5. **Визуализация**: Результаты отображаются на интерактивной карте

## Архитектура системы

```
Drone App
├── Фронтенд (Tkinter)
│   ├── Загрузка изображений
│   ├── Графический интерфейс
│   └── Визуализация результатов
├── Бэкенд (PyTorch, CLIP, OpenCV)
│   ├── Обработка изображений
│   ├── Поиск соответствий
│   └── Алгоритмы компьютерного зрения
└── Система хранения
    ├── Временная папка (temp)
    └── Папка тайлов (base)
```

## Рекомендации по использованию

1. **Для больших изображений**: Рекомендуется использовать GPU для ускорения обработки
2. **Качество снимков**: Чем выше качество снимков, тем точнее результаты поиска
3. **Оптимальный размер**: Общий снимок не должен превышать 10000×10000 пикселей для оптимальной производительности
4. **Количество фото**: Система эффективно обрабатывает до 1000 фото с дрона

## Возможные улучшения

- Интеграция с GPS-данными для определения координат
- Добавление поддержки различных форматов снимков
- Оптимизация для работы с очень большими базами данных
- Добавление функции экспорта результатов

## Лицензия

Проект распространяется под лицензией MIT. Подробности в файле LICENSE.

## Контакты

Для вопросов и предложений обращайтесь:
- Email: gcodekt@example.com
- GitHub: [https://github.com/GCodekT/Drone-App-](https://github.com/GCodekT/Drone-App-)

---

**Версия 1.0.0** • **2024**
